<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hammerle Metal Works Spacing Calculator</title>

<style>
body{
font-family:Arial;
padding:15px;
font-size:18px;
background:white;
}

.logo{
width:220px;
display:block;
margin:auto;
margin-bottom:10px;
}

.title{
text-align:center;
font-size:26px;
font-weight:bold;
margin-bottom:15px;
}

input,button{
font-size:18px;
padding:12px;
width:100%;
margin-top:8px;
}

button{
background:black;
color:white;
font-weight:bold;
}

.result{
margin-top:15px;
padding:10px;
background:#f0f0f0;
}

canvas{
margin-top:15px;
border:1px solid black;
width:100%;
height:240px;
background:white;
}
</style>
</head>

<body>

<!-- YOUR LOGO EMBEDDED -->
<img class="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...REPLACE_WITH_FULL_LOGO_STRING...">

<div class="title">Hammerle Metal Works Spacing Calculator</div>

<label>Opening Width (inches)</label>
<input id="opening" value="116">

<label>Member Width (inches)</label>
<input id="member" value="1.5">

<label>Max OC (inches)</label>
<input id="maxoc" value="18">

<button onclick="calc()">Calculate</button>

<button onclick="window.print()">Export PDF</button>

<div class="result" id="output"></div>

<canvas id="diagram"></canvas>

<script>

let centers=[];
let openingVal;
let memberVal;

function gcd(a,b){return b?gcd(b,a%b):a;}

function frac(x){
let whole=Math.floor(x);
let num=Math.round((x-whole)*16);
let den=16;
if(num==0)return whole+'"';
if(num==16)return (whole+1)+'"';
let g=gcd(num,den);
num/=g;
den/=g;
return whole+"-"+num+"/"+den+'"';
}

function calc(){

openingVal=parseFloat(document.getElementById("opening").value);
memberVal=parseFloat(document.getElementById("member").value);
let max=parseFloat(document.getElementById("maxoc").value);

let N=1,gap,oc;

while(true){
gap=(openingVal-N*memberVal)/(N+1);
oc=gap+memberVal;
if(oc<=max)break;
N++;
}

centers=[];
let first=gap+memberVal/2;

for(let i=0;i<N;i++){
centers.push(first+i*oc);
}

document.getElementById("output").innerHTML=
"<b>Members:</b> "+N+"<br>"+
"<b>Gap:</b> "+frac(gap)+"<br>"+
"<b>On-Center:</b> "+frac(oc);

drawDiagram();
}

function drawDiagram(){

let canvas=document.getElementById("diagram");
let ctx=canvas.getContext("2d");

canvas.width=canvas.offsetWidth;
canvas.height=240;

ctx.clearRect(0,0,canvas.width,canvas.height);

let scale=canvas.width/openingVal;

ctx.fillStyle="#ddd";
ctx.fillRect(0,100,canvas.width,40);

ctx.fillStyle="black";

let edges=[0];

for(let c of centers){

let left=c-memberVal/2;
let right=c+memberVal/2;

edges.push(left);
edges.push(right);

ctx.fillRect(left*scale,90,memberVal*scale,60);

ctx.strokeStyle="red";

ctx.beginPath();
ctx.moveTo(c*scale,0);
ctx.lineTo(c*scale,240);
ctx.stroke();
}

edges.push(openingVal);

ctx.strokeStyle="blue";

for(let i=0;i<edges.length-1;i++){

let x1=edges[i]*scale;
let x2=edges[i+1]*scale;
let mid=(x1+x2)/2;

ctx.beginPath();
ctx.moveTo(x1,180);
ctx.lineTo(x2,180);
ctx.stroke();

ctx.fillText(frac(edges[i+1]-edges[i]),mid-20,200);
}
}

</script>

</body>
</html>
